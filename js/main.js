const copy = {
    en: {
    nav: ["concept","statements","for companies","for events","I want it"],

    kicker: "A PUBLIC CHALLENGE ABOUT APPLICATION SECURITY",
    hero_sub: "A debate format designed to provoke companies, teams, and individuals to talk about real security. Minimal setup. <s>Potential</s> for maximum conflict.",
    cta_primary: "I want it",
    cta_secondary: "See statements",
    hero_note: "No slides. No rehearsed answers. Always a practical takeaway.",

    bb1_title: "I affirm that your AppSec (if you have it) is <span class='hl'>mostly compliance</span>.",
    bb1_sub: "Sit down. Debate with me. I guarantee you'll come out better than you came in.",

    what_kicker: "THE CONCEPT",
    what_title: "Not a talk or presentation. A <span class='hl'>public challenge</span>.",
    what_body: "I put a provocative phrase in the environment. People react. We debate using reality, without slides, without lies, just with code, architecture, and processes. Each round ends with a concrete takeaway: a pattern, a guardrail, or an implementable decision.",

    rules_title: "3 basic rules",
    r1: "1) No moral lectures.",
    r2: "2) No vague “best practices”.",
    r3: "3) Every debate ends with an actionable decision.",
    r4: "Technical debate. Respect. Code of conduct.",
    r5: "If you ship software, you’re qualified to join.",

    bb2_title: "Your supposed “secure design” fails on the <span class='hl'>first attack</span>.",
    bb2_sub: "Let’s test assumptions in public. Faster than a month of internal meetings.",

    st_kicker: "STATEMENTS",
    st_title: "Pick one. Get triggered. <span class='hl'>Debate.</span>",
    st_sub: "These are the “sign on the table” starters. Shuffle for the next round.",
    st_label: "now challenging",
    st_shuffle: "shuffle",
    st_prev: "prev",
    st_next: "next",
    st_hint: "Use this on a banner, on stage, or as a hallway debate starter.",

    bb3_title: "If the raw material for the software is poor, the final product will also be poor.",
    bb3_sub: "Security is decided before the first line of code. Let's discuss what's missing.",

    co_kicker: "FOR COMPANIES",
    co_title: "Transform your security theater into <span class='hl'>real security</span>.",
    co_body: "Works as consulting because it exposes blind spots fast, aligns dev and security, and produces an action plan. You leave with decisions teams can implement.",
    co_panel: "What you get",
    co_l1: "Prioritized risky assumptions tied to code paths, services and workflows.",
    co_l2: "Guardrails: patterns, checklists and “never again” rules teams actually follow.",
    co_l3: "Action plan: quick wins + structural fixes (people, process, pipeline, design).",

    ev_kicker: "FOR EVENTS",
    ev_title: "An attraction that creates a crowd and <span class='hl'>real technical conversation</span>.",
    ev_body: "Designed for events, conferences and meetups. High engagement, low production cost, and great content moments.",
    ev_panel: "Setup (minimal)",
    ev_l1: "<b>Table:</b> 2 chairs + small table + banner/sign + timer. Mic optional.",
    ev_l2: "<b>Stage:</b> host mic + 2 participant mics + one slide with the statement.",
    ev_l3: "<b>Time:</b> 30–45 min (stage) or 2–4 hours (table, rotating debates).",
    ev_l4: "<b>Rules:</b> technical debate + respect + code of conduct.",

    fin_company_tag: "COMPANY",
    fin_company_head: "Bring it inside home.",
    fin_company_desc: "Run a high-impact internal session. Expose blind spots. Align teams. Leave with an action plan.",
    fin_company_btn: "I want it in my company",

    fin_event_tag: "EVENT",
    fin_event_head: "Bring it on stage.",
    fin_event_desc: "Table or stage format. Creates a crowd. Sparks debate. Generates content moments.",
    fin_event_btn: "I want it in my event",

    ft_note: "All rights reserved. By <a target='_blank' title='Cássio B. Pereira' href='https://cassiodeveloper.com.br'>@cassiodeveloper</a>",

    statements: [
        "Your security is <span class='hl'>just compliance</span>.",
        "Your AppSec is <span class='hl'>security theater</span>.",
        "If CI passed, it’s still <span class='hl'>not safe</span>.",
        "Your access control is <span class='hl'>wishful thinking</span>.",
        "“Internal API” is a <span class='hl'>myth</span>.",
        "Your secrets strategy is <span class='hl'>panic-driven</span>.",
        "Threat modeling is not optional. You’re just skipping <span class='hl'>thinking</span>.",
        "Your pipeline is a bigger target than your <span class='hl'>production</span>."
    ]
    },

    pt: {
    nav: ["conceito","frases","para empresas","para eventos","eu quero"],

    kicker: "UM DESAFIO PÚBLICO SOBRE APPLICATION SECURITY",
    hero_sub: "Um formato de debate feito para provocar empresas, times e individuos a conversar sobre segurança de verdade. Setup mínimo. <s>Possível</s> treta máxima.",
    cta_primary: "Eu quero!",
    cta_secondary: "Ver frases",
    hero_note: "Sem slides. Sem resposta ensaiada. Só a experiência e o diálogo.",

    bb1_title: "Eu afirmo que o seu AppSec (se tiver) é <span class='hl'>só compliance</span>.",
    bb1_sub: "Senta. Debate comigo. Eu garanto que você sairá melhor do que entrou.",

    what_kicker: "O CONCEITO",
    what_title: "Não é palestra. É um <span class='hl'>desafio público</span>.",
    what_body: "Eu coloco uma frase provocativa no ambiente. As pessoas reagem. A gente debate usando a realidade, sem slides, sem mentiras apenas com código, arquitetura e processos. Cada rodada termina com um takeaway concreto: um padrão, um guardrail ou uma decisão implementável.",

    rules_title: "3 regras básicas",
    r1: "1) Sem sermão moral.",
    r2: "2) Sem “melhores práticas” vagas.",
    r3: "3) Todo debate termina com decisão acionável.",
    r4: "Debate técnico. Respeito. Código de conduta.",
    r5: "Se você entrega software, você está qualificado para entrar.",

    bb2_title: "Seu suposto “design seguro” falha no <span class='hl'>primeiro ataque</span>.",
    bb2_sub: "Vamos testar suposições em público. Mais rápido que um mês de reunião interna.",

    st_kicker: "FRASES",
    st_title: "Escolhe uma. Se incomoda. <span class='hl'>Debate.</span>",
    st_sub: "São os starters de placa na mesa. Clica em shuffle para a próxima rodada.",
    st_label: "agora desafiando",
    st_shuffle: "shuffle",
    st_prev: "voltar",
    st_next: "próxima",
    st_hint: "Use no banner, no palco ou como starter de debate no corredor.",

    bb3_title: "Se a matéria prima do software é ruim, o produto final também é ruim.",
    bb3_sub: "Segurança é decidida antes da primeira linha de código. Vamos discutir o que está faltando.",

    co_kicker: "PARA EMPRESAS",
    co_title: "Transforme o seu teatro de segurança em <span class='hl'>segurança real</span>.",
    co_body: "Funciona como consultoria porque expõe ponto cego rápido, alinha dev e segurança e produz um plano de ação. Você sai com decisões implementáveis.",
    co_panel: "O que você recebe",
    co_l1: "Suposições arriscadas priorizadas ligadas a caminhos de código, serviços e fluxos.",
    co_l2: "Guardrails: padrões, checklists e regras de “nunca mais” que o time realmente segue.",
    co_l3: "Plano de ação: quick wins + correções estruturais (pessoas, processo, pipeline, design).",

    ev_kicker: "PARA ORGANIZADORES",
    ev_title: "Uma atração que cria fila e gera <span class='hl'>conversa técnica de verdade</span>.",
    ev_body: "Feito pra eventos, conferências e meetups. Alto engajamento, baixo custo de produção e bons momentos de conteúdo.",
    ev_panel: "Setup (mínimo)",
    ev_l1: "<b>Mesa:</b> 2 cadeiras + mesa pequena + banner/placa + timer. Microfone opcional.",
    ev_l2: "<b>Palco:</b> mic do host + 2 mics de participantes + um slide com a frase.",
    ev_l3: "<b>Tempo:</b> 30–45 min (palco) ou 2–4 horas (mesa, debates rotativos).",
    ev_l4: "<b>Regras:</b> debate técnico + respeito + código de conduta.",

    fin_company_tag: "EMPRESA",
    fin_company_head: "Leve pra dentro de casa.",
    fin_company_desc: "Rode uma sessão interna de alto impacto. Exponha pontos cegos. Alinhe times. Saia com plano de ação.",
    fin_company_btn: "Quero na minha empresa",

    fin_event_tag: "EVENTO",
    fin_event_head: "Leve pro palco.",
    fin_event_desc: "Formato mesa ou palco. Cria fila. Puxa debate. Gera momentos de conteúdo.",
    fin_event_btn: "Quero no meu evento",

    ft_note: "Todos os direitos reservados. By <a target='_blank' title='Cássio B. Pereira' href='https://cassiodeveloper.com.br'>@cassiodeveloper</a>",

    statements: [
        "Seu AppSec é <span class='hl'>só compliance</span>.",
        "Seu AppSec é <span class='hl'>teatro de segurança</span>.",
        "Tudo verde no CI? Ainda <span class='hl'>não é seguro</span>.",
        "Seu controle de acesso é <span class='hl'>fé</span>.",
        "“API interna” é <span class='hl'>mito</span>.",
        "Sua estratégia de secrets é <span class='hl'>pânico</span>.",
        "Threat modeling não é opcional. Você só está pulando a parte de <span class='hl'>pensar</span>.",
        "Sua pipeline é um alvo maior que sua <span class='hl'>produção</span>."
    ]
    }
};

// Elements
const btnEN = document.getElementById("btnEN");
const btnPT = document.getElementById("btnPT");
const navLinks = document.querySelectorAll(".anchorLink");

const statementText = document.getElementById("statementText");
const dotsWrap = document.getElementById("dots");
const counter = document.getElementById("counter");
const shuffleBtn = document.getElementById("shuffleBtn");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

let lang = "en";
let idx = 0;

function renderDots(total){
    dotsWrap.innerHTML = "";
    for(let i=0;i<total;i++){
    const d = document.createElement("div");
    d.className = "dot" + (i===idx ? " active" : "");
    d.title = `${i+1}`;
    d.addEventListener("click", () => { idx = i; renderStatement(); });
    dotsWrap.appendChild(d);
    }
}

function renderStatement(){
    const arr = copy[lang].statements;
    const total = arr.length;
    idx = ((idx % total) + total) % total;

    statementText.innerHTML = arr[idx];
    counter.textContent = `${idx+1}/${total}`;

    // update dots
    [...dotsWrap.children].forEach((d,i)=>{
    d.classList.toggle("active", i===idx);
    });
}

function shuffle(){
    const total = copy[lang].statements.length;
    if(total <= 1) return;
    let n = idx;
    while(n === idx) n = Math.floor(Math.random() * total);
    idx = n;
    renderStatement();
}

function setNavLabels(){
    const labels = copy[lang].nav;
    navLinks.forEach((a,i)=> a.textContent = labels[i] || a.textContent);
}

function applyI18n(){
    document.documentElement.lang = lang === "pt" ? "pt-BR" : "en";
    btnEN.setAttribute("aria-pressed", lang === "en" ? "true" : "false");
    btnPT.setAttribute("aria-pressed", lang === "pt" ? "true" : "false");
    setNavLabels();

    document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    const val = copy[lang][key];
    if(typeof val === "string") el.innerHTML = val;
    });

    // rebuild dots because total is fixed but keep simple
    renderDots(copy[lang].statements.length);
    renderStatement();
}

btnEN.addEventListener("click", ()=> { lang="en"; applyI18n(); persist(); });
btnPT.addEventListener("click", ()=> { lang="pt"; applyI18n(); persist(); });

shuffleBtn.addEventListener("click", shuffle);
prevBtn.addEventListener("click", ()=> { idx--; renderStatement(); });
nextBtn.addEventListener("click", ()=> { idx++; renderStatement(); });

function persist(){
    try{ localStorage.setItem("yas_lang", lang); }catch(e){}
}

(function init(){
    let saved = "en";
    try{ saved = localStorage.getItem("yas_lang") || "en"; }catch(e){}
    const browser = (navigator.language || "").toLowerCase();
    if(!localStorage.getItem("yas_lang") && browser.startsWith("pt")) saved = "pt";
    lang = saved;
    applyI18n();
})();